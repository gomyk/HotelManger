{
  "name": "google-oauth2",
  "description": "Google API OAuth2 helpers",
  "version": "0.1.0",
  "contributors": [
    {
      "name": "Ben Lyaunzon",
      "email": "lyaunzon.b@gmail.com"
    },
    {
      "name": "Jan BÃ¶lsche",
      "email": "jan@lagomorph.de"
    }
  ],
  "keywords": [
    "google",
    "outh",
    "oauth2",
    "google-api",
    "api"
  ],
  "homepage": "https://github.com/regular/node-google-oauth2",
  "repository": {
    "type": "git",
    "url": "https://github.com/regular/node-google-oauth2.git"
  },
  "engines": {
    "node": "0.5.x"
  },
  "main": "index.js",
  "dependencies": {
    "request": "2.12.x",
    "async": "0.1.x",
    "phantomjs": "1.8.x"
  },
  "devDependencies": {
    "mocha": "1.7.x",
    "chai": "1.4.x",
    "coffee-script": "1.4.x"
  },
  "scripts": {
    "test": "./node_modules/mocha/bin/mocha --timeout 20000 --compilers coffee:coffee-script --reporter spec test/*"
  },
  "optionalDependencies": {
    "phantomjs": "1.8.x"
  },
  "licence": "MIT",
  "readme": "node-google-oauth2\n==================\n\nGoogle OAuth2 authentication tools for GoogleDrive, GMail and many other Google APIs.\nWith borrowed code from [node-gAUth by Ben Lyaunzon](https://github.com/lyaunzbe/node-gAuth).\n\nFor some reason Google decided to document their new APIs on an SDK level only, e.g. they do not provide documentation for the REST APIs.\nInstead they talk about how to use their client libraries for \"popular\" platforms. Server-side JS is not among them. This sucks.\n\nEarlier versions of Google APIs were documented on a REST level. They are deprecated and, at least in one instance, [Google broke an API](http://stackoverflow.com/questions/13552687/google-document-list-api-v2-regression-feed-does-not-contain-all-documents) and [does not even acknowledge the fact](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3274).\nThis sucks even more.\n\nend of rant.\n\nPreparation\n----------\n\nFirst you need to register your application or service with [Google's API console](https://code.google.com/apis/console) aka Dashboard\n- go to *Services* and enable the API you want to use\n- go to *API Access* and create a Client ID\n- copy the strings labeled *Client-ID* and *Client-Secret*\n- paste them into a file called oauth2-config.js and put it into your project (but don't check it in!)\n\noauth2-config.js should look something like this:\n\n    module.exports = {\n        // these are from the Google API console web interface\n        // https://code.google.com/apis/console\n        // (Section CLient ID for installed Application)\n        client_id: \"xxxxxxxxxxxx.apps.googleusercontent.com\",\n        client_secret: \"xxxxxxxx_xxxxxxxxxxxxxxx\",    \n    };\n\n\nAuth Code\n---------\n\nBefore your app can use a user's data, it must be authorized by the user for a certain set of permissions (a \"scope\").\nMore about scopes [here](https://developers.google.com/drive/training/drive-apps/auth/scopes).\n\nWith the client id, client secret and the scope, you can now request an auth code for a particular google account.\n\n    config = require(\"oauth2-config.js\")\n    goauth2 = require(\"google-oauth2\")(config)\n    scope = \"https://www.googleapis.com/auth/userinfo.profile\"\n    \n    goauth2.getAuthCode scope, (err, auth_code) ->\n        console.log auth_code\n\nNormally this would happen in a web session. Because the user needs a way to grant permissions, the code above will open a\nlocal web browser. Here you can log into your account and grant the permissions defined by the scope.\nThe Google Auth server will then redirect to localhost:3000 where a temporary http server (created inside *getAuthCode*) will\nreceive the auth code.\n\nBecause opening a web browser in a headless server environment often is not an option, we should think about a different solution. See [Authorization Automation](#authorization-automation) below.\n\nTokens\n------\n\nWith the auth code, you can now request tokens.\n      \n    goauth2.getTokensForAuthCode auth_code, (err, result) ->\n        console.log result.access_token\n        console.log result.refresh_token\n\nThe access token is needed to make actual API calls. However, it will expire after a while.\n(typically one hour). The refresh token on the other hand can be used to get a fresh access token for another\nhour of API fun.\n\n    goauth2.getAccessTokenForRefreshToken refresh_token, (err, result) ->\n        console.log result.access_token\n\nMake API calls\n--------------\n\nHere's an example of how you would use an access token in an HTTP Authorization header:\n\n    curl -H \"Authorization: Bearer {access_token}\" \\\n    -H \"Content-Type: application/json\" \\\n    https://www.googleapis.com/drive/v2/files\n\nNOTE: This will only succeed if you requested the google drive metadata scope\n\nAuthorization Automation\n------------------------\n\nAs said before, in a headless server environment it is not really an opten to open a web browser to grant access permissions.\nIf your service want to access its own google account rather than arbitrary user accounts, for example to store and share google drive documents with your users, there might be another option.\n\nIn that case you could put a google account name and password in oauth2-config.js and automate the following steps:\n- open a headless phantomJS browser session that is instrumented with a script\n- navigate to the google account login page\n- autofill account name and password and login\n- navigate to the grant permission page and automatically click the blue button\n\nThis would not only improve this module's unit tests, it would also be a solution for server-side\nauthorization of the service's own google account. And this process could be integrated with automatic provisioning. (Infrastructure is Code)\n\nWhat can I say? It nearly works! [This phantomjs script](https://github.com/regular/node-google-oauth2/blob/master/lib/google-login-phantomjs-script.coffee) tries to performs the steps above. All you need to do to see it fail is uncomment the first test in [test/test.coffee](https://github.com/regular/node-google-oauth2/blob/master/test/test.coffee#L12-L19)\nand run\n\n    npm test\n\nEverything works except for one thing: clicking the blue button. And I have no idea why it doesn't. When the test times out it automatically makes a screenshot of the browser session for you to check out.\nPull Requests are very welcome!\n\nAnd now go ahead and write some Google API wrapers!\n\n-- Jan\n",
  "_id": "google-oauth2@0.1.0",
  "dist": {
    "shasum": "e48d72c65e36429d0e1c7b2a556f4ab0322c62fe",
    "tarball": "https://registry.npmjs.org/google-oauth2/-/google-oauth2-0.1.0.tgz"
  },
  "_npmVersion": "1.1.63",
  "_npmUser": {
    "name": "regular",
    "email": "jan@lagomorph.de"
  },
  "maintainers": [
    {
      "name": "regular",
      "email": "jan@lagomorph.de"
    }
  ],
  "directories": {},
  "_shasum": "e48d72c65e36429d0e1c7b2a556f4ab0322c62fe",
  "_resolved": "https://registry.npmjs.org/google-oauth2/-/google-oauth2-0.1.0.tgz",
  "_from": "google-oauth2@latest"
}
